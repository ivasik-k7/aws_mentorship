# AWS CloudFront: Основи та Архітектура

## Що таке AWS CloudFront?

AWS CloudFront — це **мережа доставки контенту (CDN)**, яка прискорює розповсюдження веб-ресурсів, таких як HTML, CSS, JavaScript, зображення та відео. CloudFront використовує глобальну мережу **edge locations** (крайових точок) для кешування контенту, що зменшує затримки та покращує продуктивність.

## Основні компоненти CloudFront

### 1. **Edge Locations (Крайові точки)**

Edge Locations — це розподілені по всьому світу центри обробки даних AWS, які кешують контент для швидкої доставки користувачам.

- Зменшують навантаження на сервер-джерело (Origin).
- Знижують **латентність** (затримки завантаження контенту).
- Покращують продуктивність за допомогою **кешування**.

### 2. **CloudFront Distribution (Розподіл CloudFront)**

CloudFront Distribution — це конфігурація для управління потоком контенту через CloudFront. Існує два типи:

- **Web Distribution** – використовується для веб-ресурсів (HTML, CSS, JS, API).
- **RTMP Distribution** (застарілий) – використовувався для потокового відео (заміщений іншими рішеннями AWS).

### 3. **Origins (Джерела контенту)**

Origins — це **початкове місце**, з якого CloudFront отримує контент:

- **S3 Bucket** – для зберігання статичних файлів (зображень, відео, HTML тощо).
- **Application Load Balancer (ALB)** – використовується для динамічних веб-додатків.
- **EC2 Instance** – окремий сервер, що містить контент.
- **Lambda Function** – виконує обробку даних на льоту.

### 4. **Cache Behavior (Кешування та налаштування поведінки)**

Cache Behavior керує тим, як CloudFront обробляє запити:

- **TTL (Time-to-Live)** – визначає, як довго контент зберігається в кеші.
- **Cache Invalidation** – механізм оновлення кешу.
- **Allowed HTTP Methods** – налаштування доступних HTTP-запитів (GET, POST тощо).
- **Query String Forwarding** – передача параметрів у запитах.

### 5. **Origin Access Control (OAC) / Origin Access Identity (OAI)**

- **OAI** – дозволяє CloudFront отримувати контент з **приватного S3 bucket**.
- **OAC** (новий підхід) – більш гнучкий механізм для обмеження доступу.

### 6. **Viewer Policies (Політики перегляду)**

Визначають, як CloudFront обробляє запити користувачів:

- **Redirect HTTP to HTTPS** – забезпечує безпечне з'єднання.
- **Signed URLs / Signed Cookies** – контрольований доступ до контенту.
- **Geo-Restriction** – обмеження доступу за географічним положенням.

### 7. **Lambda@Edge**

Lambda@Edge дозволяє виконувати код без серверів у крайових точках CloudFront для модифікації запитів або відповідей у реальному часі.

---

## Як працює CloudFront? (Принципи роботи)

1. **Користувач надсилає запит** на контент (наприклад, зображення `example.jpg`).
2. **CloudFront перевіряє кеш** в найближчому Edge Location:
   - Якщо контент є в кеші → повертається користувачу (**Cache Hit**).
   - Якщо контенту немає → CloudFront отримує його з Origin (**Cache Miss**) і зберігає в Edge Location.
3. **CloudFront віддає контент** з мінімальною затримкою.
4. **Наступні запити** отримують кешований контент, що знижує навантаження на Origin.

---

## Переваги використання AWS CloudFront

✅ **Зменшення затримок** – контент ближче до користувачів.
✅ **Оптимізація трафіку** – кешування знижує навантаження на сервер.
✅ **Безпека** – підтримка HTTPS, WAF, DDoS-захист.
✅ **Глобальна доступність** – мережа з сотень Edge Locations.
✅ **Гнучке налаштування** – підтримка динамічного контенту, політики кешування.

---

## Висновок

AWS CloudFront – це потужна CDN, яка дозволяє прискорити доставку контенту, зменшити навантаження на сервери та підвищити безпеку. Розуміння його архітектури допоможе ефективно використовувати CloudFront у реальних проектах.
